<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coolcollege.intelligent.dao.newstore.NsDataVisitTableColumnMapper">
  <resultMap id="BaseResultMap" type="com.coolcollege.intelligent.model.newstore.NsDataVisitTableColumnDO">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="deleted" jdbcType="BIT" property="deleted" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="create_date" jdbcType="DATE" property="createDate" />
    <result column="create_user_id" jdbcType="VARCHAR" property="createUserId" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="new_store_id" jdbcType="VARCHAR" property="newStoreId" />
    <result column="new_store_name" jdbcType="VARCHAR" property="newStoreName" />
    <result column="region_id" jdbcType="BIGINT" property="regionId" />
    <result column="region_path" jdbcType="VARCHAR" property="regionPath" />
    <result column="record_id" jdbcType="BIGINT" property="recordId" />
    <result column="record_status" jdbcType="VARCHAR" property="recordStatus" />
    <result column="meta_table_id" jdbcType="BIGINT" property="metaTableId" />
    <result column="meta_column_id" jdbcType="BIGINT" property="metaColumnId" />
    <result column="meta_column_name" jdbcType="VARCHAR" property="metaColumnName" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="value1" jdbcType="VARCHAR" property="value1" />
    <result column="value2" jdbcType="VARCHAR" property="value2" />
    <result column="submit_status" jdbcType="TINYINT" property="submitStatus" />
  </resultMap>
  <sql id="Base_Column_List">
    id, deleted, create_time, create_date, create_user_id, update_time, new_store_id, new_store_name, 
    region_id, region_path, record_id, record_status, meta_table_id, meta_column_id, 
    meta_column_name, description, value1, value2, submit_status
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from ns_data_visit_table_column_${enterpriseId}
    where id = #{id,jdbcType=BIGINT}
  </select>
  <select id="selectByRecordId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from ns_data_visit_table_column_${enterpriseId}
    where record_id = #{recordId}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from ns_data_visit_table_column_${enterpriseId}
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <delete id="deleteByRecordId">
    delete from ns_data_visit_table_column_${enterpriseId}
    where record_id = #{recordId}
  </delete>
  <insert id="insertSelective" parameterType="com.coolcollege.intelligent.model.newstore.NsDataVisitTableColumnDO">
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into ns_data_visit_table_column_${enterpriseId}
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="record.deleted != null">
        deleted,
      </if>
      <if test="record.createTime != null">
        create_time,
      </if>
      <if test="record.createDate != null">
        create_date,
      </if>
      <if test="record.createUserId != null">
        create_user_id,
      </if>
      <if test="record.updateTime != null">
        update_time,
      </if>
      <if test="record.newStoreId != null">
        new_store_id,
      </if>
      <if test="record.newStoreName != null">
        new_store_name,
      </if>
      <if test="record.regionId != null">
        region_id,
      </if>
      <if test="record.regionPath != null">
        region_path,
      </if>
      <if test="record.recordId != null">
        record_id,
      </if>
      <if test="record.recordStatus != null">
        record_status,
      </if>
      <if test="record.metaTableId != null">
        meta_table_id,
      </if>
      <if test="record.metaColumnId != null">
        meta_column_id,
      </if>
      <if test="record.metaColumnName != null">
        meta_column_name,
      </if>
      <if test="record.description != null">
        description,
      </if>
      <if test="record.value1 != null">
        value1,
      </if>
      <if test="record.value2 != null">
        value2,
      </if>
      <if test="record.submitStatus != null">
        submit_status,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="record.deleted != null">
        #{record.deleted,jdbcType=BIT},
      </if>
      <if test="record.createTime != null">
        #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createDate != null">
        #{record.createDate,jdbcType=DATE},
      </if>
      <if test="record.createUserId != null">
        #{record.createUserId,jdbcType=VARCHAR},
      </if>
      <if test="record.updateTime != null">
        #{record.updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.newStoreId != null">
        #{record.newStoreId,jdbcType=VARCHAR},
      </if>
      <if test="record.newStoreName != null">
        #{record.newStoreName,jdbcType=VARCHAR},
      </if>
      <if test="record.regionId != null">
        #{record.regionId,jdbcType=BIGINT},
      </if>
      <if test="record.regionPath != null">
        #{record.regionPath,jdbcType=VARCHAR},
      </if>
      <if test="record.recordId != null">
        #{record.recordId,jdbcType=BIGINT},
      </if>
      <if test="record.recordStatus != null">
        #{record.recordStatus,jdbcType=TINYINT},
      </if>
      <if test="record.metaTableId != null">
        #{record.metaTableId,jdbcType=BIGINT},
      </if>
      <if test="record.metaColumnId != null">
        #{record.metaColumnId,jdbcType=BIGINT},
      </if>
      <if test="record.metaColumnName != null">
        #{record.metaColumnName,jdbcType=VARCHAR},
      </if>
      <if test="record.description != null">
        #{record.description,jdbcType=VARCHAR},
      </if>
      <if test="record.value1 != null">
        #{record.value1,jdbcType=VARCHAR},
      </if>
      <if test="record.value2 != null">
        #{record.value2,jdbcType=VARCHAR},
      </if>
      <if test="record.submitStatus != null">
        #{record.submitStatus,jdbcType=TINYINT},
      </if>
    </trim>
  </insert>
  <insert id="batchInsert">
    insert into ns_data_visit_table_column_${enterpriseId}
    <trim prefix="(" suffix=")" suffixOverrides=",">
        deleted,
        create_time,
        create_date,
        create_user_id,
        update_time,
        new_store_id,
        new_store_name,
        region_id,
        region_path,
        record_id,
        record_status,
        meta_table_id,
        meta_column_id,
        meta_column_name,
        description,
        value1,
        value2,
        submit_status,
    </trim>
    values
    <foreach collection="list" item="record" separator=",">
        (#{record.deleted,jdbcType=BIT},
        #{record.createTime,jdbcType=TIMESTAMP},
        #{record.createDate,jdbcType=DATE},
        #{record.createUserId,jdbcType=VARCHAR},
        #{record.updateTime,jdbcType=TIMESTAMP},
        #{record.newStoreId,jdbcType=VARCHAR},
        #{record.newStoreName,jdbcType=VARCHAR},
        #{record.regionId,jdbcType=BIGINT},
        #{record.regionPath,jdbcType=VARCHAR},
        #{record.recordId,jdbcType=BIGINT},
        #{record.recordStatus,jdbcType=TINYINT},
        #{record.metaTableId,jdbcType=BIGINT},
        #{record.metaColumnId,jdbcType=BIGINT},
        #{record.metaColumnName,jdbcType=VARCHAR},
        #{record.description,jdbcType=VARCHAR},
        #{record.value1,jdbcType=VARCHAR},
        #{record.value2,jdbcType=VARCHAR},
        #{record.submitStatus,jdbcType=TINYINT})
    </foreach>
    ON DUPLICATE KEY UPDATE
    update_time = values(create_time)
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.coolcollege.intelligent.model.newstore.NsDataVisitTableColumnDO">
    update ns_data_visit_table_column_${enterpriseId}
    <set>
      <if test="record.deleted != null">
        deleted = #{record.deleted,jdbcType=BIT},
      </if>
      <if test="record.createTime != null">
        create_time = #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createDate != null">
        create_date = #{record.createDate,jdbcType=DATE},
      </if>
      <if test="record.createUserId != null">
        create_user_id = #{record.createUserId,jdbcType=VARCHAR},
      </if>
      <if test="record.updateTime != null">
        update_time = #{record.updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.newStoreId != null">
        new_store_id = #{record.newStoreId,jdbcType=VARCHAR},
      </if>
      <if test="record.newStoreName != null">
        new_store_name = #{record.newStoreName,jdbcType=VARCHAR},
      </if>
      <if test="record.regionId != null">
        region_id = #{record.regionId,jdbcType=BIGINT},
      </if>
      <if test="record.regionPath != null">
        region_path = #{record.regionPath,jdbcType=VARCHAR},
      </if>
      <if test="record.recordId != null">
        record_id = #{record.recordId,jdbcType=BIGINT},
      </if>
      <if test="record.recordStatus != null">
        record_status = #{record.recordStatus,jdbcType=VARCHAR},
      </if>
      <if test="record.metaTableId != null">
        meta_table_id = #{record.metaTableId,jdbcType=BIGINT},
      </if>
      <if test="record.metaColumnId != null">
        meta_column_id = #{record.metaColumnId,jdbcType=BIGINT},
      </if>
      <if test="record.metaColumnName != null">
        meta_column_name = #{record.metaColumnName,jdbcType=VARCHAR},
      </if>
      <if test="record.description != null">
        description = #{record.description,jdbcType=VARCHAR},
      </if>
      <if test="record.value1 != null">
        value1 = #{record.value1,jdbcType=VARCHAR},
      </if>
      <if test="record.value2 != null">
        value2 = #{record.value2,jdbcType=VARCHAR},
      </if>
      <if test="record.submitStatus != null">
        submit_status = #{record.submitStatus,jdbcType=TINYINT},
      </if>
    </set>
    where id = #{record.id,jdbcType=BIGINT}
  </update>
  <update id="batchUpdateValue">
    update ns_data_visit_table_column_${enterpriseId}
    set
    value1 = CASE id
    <foreach collection="list" item="record">
      WHEN #{record.id} THEN #{record.value1}
    </foreach>
    END,
    value2 = CASE id
    <foreach collection="list" item="record">
      WHEN #{record.id} THEN #{record.value2}
    </foreach>
    END,
    update_time = CASE id
    <foreach collection="list" item="record">
      WHEN #{record.id} THEN #{record.updateTime}
    </foreach>
    END
    where id in
    <foreach collection="list" item="record" open="(" separator="," close=")">
      #{record.id}
    </foreach>
  </update>
  <update id="updateRecordStatusByRecordId">
    update ns_data_visit_table_column_${enterpriseId}
    set record_status = #{recordStatus,jdbcType=VARCHAR},
        submit_status = 1,
        update_time = now()
    where record_id = #{recordId}
  </update>
  <sql id="dynamicQuery">
    <trim prefix="WHERE" prefixOverrides="AND | OR">
      <if test="null != id">
         and t.id = #{id,jdbcType=BIGINT}
      </if>
      <if test="null != deleted">
         and t.deleted = #{deleted,jdbcType=BIT}
      </if>
      <if test="null != createTime">
         and t.create_time = #{createTime,jdbcType=TIMESTAMP}
      </if>
      <if test="null != createDate">
         and t.create_date = #{createDate,jdbcType=DATE}
      </if>
      <if test="null != createUserId">
         and t.create_user_id = #{createUserId,jdbcType=VARCHAR}
      </if>
      <if test="null != updateTime">
         and t.update_time = #{updateTime,jdbcType=TIMESTAMP}
      </if>
      <if test="null != newStoreId">
         and t.new_store_id = #{newnewStoreId,jdbcType=VARCHAR}
      </if>
      <if test="null != newStoreName">
         and t.new_store_name = #{newStoreName,jdbcType=VARCHAR}
      </if>
      <if test="null != regionId">
         and t.region_id = #{regionId,jdbcType=BIGINT}
      </if>
      <if test="null != regionPath">
         and t.region_path = #{regionPath,jdbcType=VARCHAR}
      </if>
      <if test="null != recordId">
         and t.record_id = #{recordId,jdbcType=BIGINT}
      </if>
      <if test="null != recordStatus">
         and t.record_status = #{recordStatus,jdbcType=VARCHAR}
      </if>
      <if test="null != metaTableId">
         and t.meta_table_id = #{metaTableId,jdbcType=BIGINT}
      </if>
      <if test="null != metaColumnId">
         and t.meta_column_id = #{metaColumnId,jdbcType=BIGINT}
      </if>
      <if test="null != metaColumnName">
         and t.meta_column_name = #{metaColumnName,jdbcType=VARCHAR}
      </if>
      <if test="null != description">
         and t.description = #{description,jdbcType=VARCHAR}
      </if>
      <if test="null != value1">
         and t.value1 = #{value1,jdbcType=VARCHAR}
      </if>
      <if test="null != value2">
         and t.value2 = #{value2,jdbcType=VARCHAR}
      </if>
      <if test="null != submitStatus">
         and t.submit_status = #{submitStatus,jdbcType=TINYINT}
      </if>
    </trim>
  </sql>
</mapper>