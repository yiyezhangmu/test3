<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coolcollege.intelligent.dao.storework.SwStoreWorkTableMappingMapper">
  <resultMap id="BaseResultMap" type="com.coolcollege.intelligent.model.storework.SwStoreWorkTableMappingDO">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="store_work_id" jdbcType="BIGINT" property="storeWorkId" />
    <result column="work_cycle" jdbcType="VARCHAR" property="workCycle" />
    <result column="begin_date" jdbcType="VARCHAR" property="beginDate" />
    <result column="begin_time" jdbcType="VARCHAR" property="beginTime" />
    <result column="limit_hour" jdbcType="DOUBLE" property="limitHour" />
    <result column="meta_table_id" jdbcType="BIGINT" property="metaTableId" />
    <result column="duty_name" jdbcType="VARCHAR" property="dutyName" />
    <result column="group_num" jdbcType="INTEGER" property="groupNum" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="create_user_id" jdbcType="VARCHAR" property="createUserId" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="update_user_id" jdbcType="VARCHAR" property="updateUserId" />
    <result column="deleted" jdbcType="BIT" property="deleted" />
    <result column="comment_person_info" jdbcType="VARCHAR" property="commentPersonInfo" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.coolcollege.intelligent.model.storework.SwStoreWorkTableMappingDO">
    <result column="handle_person_info" jdbcType="LONGVARCHAR" property="handlePersonInfo" />
    <result column="table_info" jdbcType="LONGVARCHAR" property="tableInfo" />
  </resultMap>
  <sql id="Base_Column_List">
    id, store_work_id, work_cycle, begin_date, begin_time, limit_hour, meta_table_id, 
    duty_name, group_num, create_time, create_user_id, update_time, update_user_id, deleted,comment_person_info
  </sql>
  <sql id="Blob_Column_List">
    handle_person_info,table_info
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs">
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from sw_store_work_table_mapping_${enterpriseId}
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from sw_store_work_table_mapping_${enterpriseId}
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insertSelective" parameterType="com.coolcollege.intelligent.model.storework.SwStoreWorkTableMappingDO">
    <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into sw_store_work_table_mapping_${enterpriseId}
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="record.storeWorkId != null">
        store_work_id,
      </if>
      <if test="record.workCycle != null">
        work_cycle,
      </if>
      <if test="record.beginDate != null">
        begin_date,
      </if>
      <if test="record.beginTime != null">
        begin_time,
      </if>
      <if test="record.limitHour != null">
        limit_hour,
      </if>
      <if test="record.metaTableId != null">
        meta_table_id,
      </if>
      <if test="record.dutyName != null">
        duty_name,
      </if>
      <if test="record.groupNum != null">
        group_num,
      </if>
      <if test="record.createTime != null">
        create_time,
      </if>
      <if test="record.createUserId != null">
        create_user_id,
      </if>
      <if test="record.updateTime != null">
        update_time,
      </if>
      <if test="record.updateUserId != null">
        update_user_id,
      </if>
      <if test="record.deleted != null">
        deleted,
      </if>
      <if test="record.handlePersonInfo != null">
        handle_person_info,
      </if>
      <if test="record.tableInfo != null">
        table_info,
      </if>
      <if test="record.commentPersonInfo != null">
          comment_person_info,
        </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="record.storeWorkId != null">
        #{record.storeWorkId,jdbcType=BIGINT},
      </if>
      <if test="record.workCycle != null">
        #{record.workCycle,jdbcType=VARCHAR},
      </if>
      <if test="record.beginDate != null">
        #{record.beginDate,jdbcType=VARCHAR},
      </if>
      <if test="record.beginTime != null">
        #{record.beginTime,jdbcType=VARCHAR},
      </if>
      <if test="record.limitHour != null">
        #{record.limitHour,jdbcType=DOUBLE},
      </if>
      <if test="record.metaTableId != null">
        #{record.metaTableId,jdbcType=BIGINT},
      </if>
      <if test="record.dutyName != null">
        #{record.dutyName,jdbcType=VARCHAR},
      </if>
      <if test="record.groupNum != null">
        #{record.groupNum,jdbcType=INTEGER},
      </if>
      <if test="record.createTime != null">
        #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createUserId != null">
        #{record.createUserId,jdbcType=VARCHAR},
      </if>
      <if test="record.updateTime != null">
        #{record.updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updateUserId != null">
        #{record.updateUserId,jdbcType=VARCHAR},
      </if>
      <if test="record.deleted != null">
        #{record.deleted,jdbcType=BIT},
      </if>
      <if test="record.handlePersonInfo != null">
        #{record.handlePersonInfo,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.tableInfo != null">
        #{record.tableInfo,jdbcType=LONGVARCHAR},
      </if>
        <if test="record.commentPersonInfo != null">
          #{record.commentPersonInfo,jdbcType=LONGVARCHAR},
        </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.coolcollege.intelligent.model.storework.SwStoreWorkTableMappingDO">
    update sw_store_work_table_mapping_${enterpriseId}
    <set>
      <if test="record.storeWorkId != null">
        store_work_id = #{record.storeWorkId,jdbcType=BIGINT},
      </if>
      <if test="record.workCycle != null">
        work_cycle = #{record.workCycle,jdbcType=VARCHAR},
      </if>
      <if test="record.beginDate != null">
        begin_date = #{record.beginDate,jdbcType=VARCHAR},
      </if>
      <if test="record.beginTime != null">
        begin_time = #{record.beginTime,jdbcType=VARCHAR},
      </if>
      <if test="record.limitHour != null">
        limit_hour = #{record.limitHour,jdbcType=DOUBLE},
      </if>
      <if test="record.metaTableId != null">
        meta_table_id = #{record.metaTableId,jdbcType=BIGINT},
      </if>
      <if test="record.dutyName != null">
        duty_name = #{record.dutyName,jdbcType=VARCHAR},
      </if>
      <if test="record.groupNum != null">
        group_num = #{record.groupNum,jdbcType=INTEGER},
      </if>
      <if test="record.createTime != null">
        create_time = #{record.createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.createUserId != null">
        create_user_id = #{record.createUserId,jdbcType=VARCHAR},
      </if>
      <if test="record.updateTime != null">
        update_time = #{record.updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.updateUserId != null">
        update_user_id = #{record.updateUserId,jdbcType=VARCHAR},
      </if>
      <if test="record.deleted != null">
        deleted = #{record.deleted,jdbcType=BIT},
      </if>
      <if test="record.handlePersonInfo != null">
        handle_person_info = #{record.handlePersonInfo,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.tableInfo != null">
        table_info = #{record.tableInfo,jdbcType=LONGVARCHAR},
      </if>
      <if test="record.commentPersonInfo != null">
        comment_person_info = #{record.commentPersonInfo,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{record.id,jdbcType=BIGINT}
  </update>
  <sql id="dynamicQuery">
    <trim prefix="WHERE" prefixOverrides="AND | OR">
      <if test="null != id">
         and t.id = #{id,jdbcType=BIGINT}
      </if>
      <if test="null != storeWorkId">
         and t.store_work_id = #{storeWorkId,jdbcType=BIGINT}
      </if>
      <if test="null != workCycle">
         and t.work_cycle = #{workCycle,jdbcType=VARCHAR}
      </if>
      <if test="null != beginDate">
         and t.begin_date = #{beginDate,jdbcType=VARCHAR}
      </if>
      <if test="null != beginTime">
         and t.begin_time = #{beginTime,jdbcType=VARCHAR}
      </if>
      <if test="null != limitHour">
         and t.limit_hour = #{limitHour,jdbcType=DOUBLE}
      </if>
      <if test="null != metaTableId">
         and t.meta_table_id = #{metaTableId,jdbcType=BIGINT}
      </if>
      <if test="null != dutyName">
         and t.duty_name = #{dutyName,jdbcType=VARCHAR}
      </if>
      <if test="null != groupNum">
         and t.group_num = #{groupNum,jdbcType=INTEGER}
      </if>
      <if test="null != createTime">
         and t.create_time = #{createTime,jdbcType=TIMESTAMP}
      </if>
      <if test="null != createUserId">
         and t.create_user_id = #{createUserId,jdbcType=VARCHAR}
      </if>
      <if test="null != updateTime">
         and t.update_time = #{updateTime,jdbcType=TIMESTAMP}
      </if>
      <if test="null != updateUserId">
         and t.update_user_id = #{updateUserId,jdbcType=VARCHAR}
      </if>
      <if test="null != deleted">
         and t.deleted = #{deleted,jdbcType=BIT}
      </if>
      <if test="null != handlePersonInfo">
         and t.handle_person_info = #{handlePersonInfo,jdbcType=LONGVARCHAR}
      </if>
    </trim>
  </sql>
  <select id="selectListByStoreWorkIds"  resultMap="ResultMapWithBLOBs">
    select
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from sw_store_work_table_mapping_${enterpriseId}
    where deleted = 0 and store_work_id in
    <foreach collection="storeWorkIds" index="index" item="storeWorkId"
             separator="," open="(" close=")">
      #{storeWorkId}
    </foreach>
  </select>
  <select id="selectListByStoreWorkIdsAndMappingId"  resultMap="ResultMapWithBLOBs">
    select
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from sw_store_work_table_mapping_${enterpriseId}
    where deleted = 0 and store_work_id = #{storeWorkIds}
    and id = #{tableMappingId}
  </select>

  <select id="selectListWithDelByStoreWorkIds"  resultMap="ResultMapWithBLOBs">
    select
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from sw_store_work_table_mapping_${enterpriseId}
    where store_work_id in
    <foreach collection="storeWorkIds" index="index" item="storeWorkId"
             separator="," open="(" close=")">
      #{storeWorkId}
    </foreach>
  </select>

  <insert id="batchInsertOrUpdateStoreWorkTable">
    insert into sw_store_work_table_mapping_${enterpriseId}
    (id, store_work_id, work_cycle, begin_date, begin_time, limit_hour, meta_table_id, duty_name, group_num, handle_person_info, table_info, create_time, create_user_id, deleted,comment_person_info)
    values
    <foreach collection="list" item="item" separator=",">
      (#{item.id}, #{item.storeWorkId},#{item.workCycle},#{item.beginDate},#{item.beginTime},#{item.limitHour},#{item.metaTableId},#{item.dutyName},#{item.groupNum},#{item.handlePersonInfo},#{item.tableInfo},#{item.createTime},#{item.createUserId},#{item.deleted},#{item.commentPersonInfo})
    </foreach>
    ON DUPLICATE KEY UPDATE
    begin_date=values(begin_date),begin_time=values(begin_time),
    limit_hour=values(limit_hour), meta_table_id=values(meta_table_id), duty_name=values(duty_name),
    group_num=values(group_num), handle_person_info=values(handle_person_info), table_info=values(table_info), update_user_id=values(update_user_id),
    deleted=values(deleted),comment_person_info=values(comment_person_info)
  </insert>


  <delete id="delTableMappingByStoreWorkId">
        delete from sw_store_work_table_mapping_${enterpriseId}
        where store_work_id= #{storeWorkId}
  </delete>

  <select id="selectListByIds"  resultMap="ResultMapWithBLOBs">
    select
    id,
    <include refid="Blob_Column_List" />
    from sw_store_work_table_mapping_${enterpriseId}
    where id in
    <foreach collection="ids" index="index" item="id" separator="," open="(" close=")">
      #{id}
    </foreach>
  </select>

  <select id="listByStoreWorkId"  resultMap="ResultMapWithBLOBs">
    select
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from sw_store_work_table_mapping_${enterpriseId}
    where store_work_id= #{storeWorkId} and deleted = 0
  </select>

</mapper>